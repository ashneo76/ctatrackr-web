<html>
	<head>
		<title>CTA Trackr</title>
		<script type="text/javascript" src="jquery-1.5.min.js"></script>
		<script type="text/javascript">
			var baseUrl = "http://www.ctabustracker.com/bustime/api/v1/";
			var key = "?key=ni4WHrb4BGVAEGfP3imRy49b";
			
			var dir = new Array();
			dir['NB'] = 'North Bound';
			dir['EB'] = 'East Bound';
			dir['WB'] = 'West Bound';
			dir['SB'] = 'South Bound';
			
			function getRtDirs()
			{
				$.ajax({
					type:"GET",
					url:baseUrl+"getdirections"+key+"&rt="+,
					dataType:"results",
					success: populateRoutes
				});
			}
			
			function getStops()
			{
				/*$.ajax({
					type:"GET",
					url:baseUrl+"getstops"+key+"&rt="+document.testForm.rt+"&rtdir="+document.testForm.rtdir
				});*/
			}
			
			function populateRoutes(results){
        			$("#rt").append("<option value=\"test\">test: rtnm</option>");
				$(results).find("route").each(function(){
					var rtno = $(this).find("rt").text();
					var rtnm = $(this).find("rtnm").text();
					$("#rt").append("<option value=\""+rtno+"\">"+rtno+': '+rtnm+"</option>");
				});
			}
			
			function populateDirs(results){
				$(results).find("dir").each(function(){
					var rtdir = $(this).text();
					$("#rtdir").append("<option value=\""+rtdir+"\">"+dir[rtdir]+"</option>");
				});
			}
			
			function populateStops(){
			}
			
			// actual processing
			$(document).ready(
				$.ajax({
					type:"GET",
					url:baseUrl+"getroutes"+key,
					dataType:"results",
					success: populateRoutes
				})
			);
			
			$("#rt").change(getRtDirs);
		</script>
	</head>
	<body>
		<p>CTA System time: <span id="time"></span></p>
		<form name="testForm" method="GET" action="#">
			Route:<select id="rt" name="rt"></select><br/>
			Direction(N/E/S/W):<select id="rtdir" name="rtdir"></select><br/>
			<input type="submit" value="Get stops!!!" onClick="getStops();" />
		</form>
		
		<div id="result">
			<hr>
			<p>STOPS</p>
			<div id="stops">
			</div>
		</div>
	</body>
</html>